---
title:  性能优化，从老中医到科学理论指导
date: 2018-08-24 16:30:03
categories: performance
tags:
    - Linux
    - performance
    - troubleshooting
    - network
---

# 性能优化，从老中医到科学理论指导

## 理解最佳线程数量

最佳线程数量

单线程压测，总rt(total)，下游依赖rt(IO), rt(CPU)=rt(total)-rt(IO)

最佳线程数量 rt(total)/rt(cpu)

维持住rt

这一点占性能优化领域的50%

从单线程跑出QPS、各个环节的RT、CPU占用等数据

然后加并发直到QPS不再增加，然后看哪个环境RT增加最大，瓶颈就在哪里

## 思路严谨

最难讲清楚

## 老中医经验不可缺少

量变到质变

## 找瓶颈，先干掉瓶颈才能优化其它

没有找到瓶颈，所做的其它优化会看不出效果，误入歧途，瞎蒙

## 全栈能力，一文钱难倒英雄好汉

因为关键是找瓶颈，作为java程序员如果只能看jstack、jstat可能发现的不是瓶颈

## 案列

https://www.atatech.org/articles/73174


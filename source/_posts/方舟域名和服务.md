---
title: 部分机器网络不通
date: 2018-08-25 16:30:03
categories: DNS
tags:
    - Linux
    - DNS
    - network
---

# 方舟域名和服务

## 服务发布

- 通过Docker方式指定需要发布的服务名称和对应端口


~:docker run -d -it --name HTTP_Provider --net=vlan701 -l alimw.domain=chengji.test.com -l alimw.port=8090 reg.docker.alibaba-inc.com/middleware.udp

说明：这里docker容器的名称是HTTP_Provider ,通过alimw.domain=chengji.test.com -l alimw.port=8090 指定了服务名为：chengji.test.com，端口：8090

- 启动后，进入VIPServer的OPS平台查询域名：chengji.test.com，可以看到注册的服务IP和端口，以及健康状态。
`说明：由于只是通过Docker方式注册了服务，但是内部服务并没有启动，可以看到健康程度标注为差，健康检查为false。`
- 部署相关的HTTP服务，再次进入VIPServer的OPS平台查询域名：chengji.test.com，将可以看到健康检查状态正常。

## 服务发现

1.VIPServer-Client方式

    任意启动一个Docker环境，部署好HTTP服务的消费者，采用标准的VS的Client订阅方式即可
2.DNS-F方式（跨语言）


    需要提前部署好DNS-F客户端，需要保证DNS-F服务高可用，可直接通过curl方式进行测试

3.方舟提供DNS Server，负责这些域名的解析